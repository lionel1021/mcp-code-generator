# ğŸš€ Supabase é¡¹ç›®é…ç½®æŒ‡å—

## ğŸ“‹ å¿«é€Ÿé…ç½®æ­¥éª¤

### 1ï¸âƒ£ åˆ›å»º Supabase é¡¹ç›® (5åˆ†é’Ÿ)

1. **è®¿é—® Supabase**
   - æ‰“å¼€ [supabase.com](https://supabase.com)
   - ç‚¹å‡» **"Start your project"** æˆ– **"Sign In"**

2. **ç™»å½•/æ³¨å†Œ**
   - ä½¿ç”¨ GitHub è´¦å·ç™»å½• (æ¨è)
   - æˆ–åˆ›å»ºæ–°è´¦å·

3. **åˆ›å»ºæ–°é¡¹ç›®**
   - ç‚¹å‡» **"New Project"**
   - é€‰æ‹©ç»„ç»‡ (é»˜è®¤ä¸ºä¸ªäººè´¦å·)

4. **å¡«å†™é¡¹ç›®ä¿¡æ¯**
   ```
   åç§°: lighting-app-prod
   æ•°æ®åº“å¯†ç : [ç”Ÿæˆå¼ºå¯†ç å¹¶ä¿å­˜]
   åœ°åŒº: Northeast Asia (Seoul) æˆ–æœ€è¿‘çš„åŒºåŸŸ
   å®šä»·: Free tier (å…è´¹ç‰ˆ)
   ```

5. **ç­‰å¾…é¡¹ç›®åˆ›å»º**
   - å¤§çº¦éœ€è¦ 2-3 åˆ†é’Ÿ
   - çŠ¶æ€å˜ä¸º "Project ready" æ—¶å®Œæˆ

### 2ï¸âƒ£ è·å–é¡¹ç›®å‡­æ® (2åˆ†é’Ÿ)

åœ¨é¡¹ç›®ä»ªè¡¨æ¿ä¸­ï¼š

1. **è¿›å…¥è®¾ç½®**
   - å·¦ä¾§èœå• â†’ **Settings** â†’ **API**

2. **å¤åˆ¶é¡¹ç›®ä¿¡æ¯**
   ```bash
   Project URL: https://[é¡¹ç›®ID].supabase.co
   API Keys:
   - anon public: eyJ... (å…¬å¼€å¯†é’¥)
   - service_role: eyJ... (æœåŠ¡ç«¯å¯†é’¥ï¼Œä¿å¯†!)
   ```

### 3ï¸âƒ£ æ›´æ–°ç¯å¢ƒå˜é‡ (1åˆ†é’Ÿ)

ç¼–è¾‘é¡¹ç›®ä¸­çš„ `.env.local` æ–‡ä»¶ï¼š

```bash
# æ›¿æ¢ä¸ºä½ çš„çœŸå®ä¿¡æ¯
NEXT_PUBLIC_SUPABASE_URL=https://ä½ çš„é¡¹ç›®ID.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=ä½ çš„anonå¯†é’¥
SUPABASE_SERVICE_ROLE_KEY=ä½ çš„service_roleå¯†é’¥

# å…¶ä»–é…ç½®ä¿æŒä¸å˜
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

### 4ï¸âƒ£ é…ç½®è®¤è¯è®¾ç½® (2åˆ†é’Ÿ)

åœ¨ Supabase ä»ªè¡¨æ¿ä¸­ï¼š

1. **Authentication è®¾ç½®**
   - å·¦ä¾§èœå• â†’ **Authentication** â†’ **Settings**

2. **ç«™ç‚¹ URL é…ç½®**
   ```
   Site URL: http://localhost:3000
   ```

3. **é‡å®šå‘ URLs**
   - ç‚¹å‡» **"Add URL"**
   - æ·»åŠ : `http://localhost:3000/auth/callback`
   - ç”Ÿäº§ç¯å¢ƒ: `https://ä½ çš„åŸŸå.com/auth/callback`

4. **é‚®ç®±ç¡®è®¤** (å¯é€‰)
   - **Enable email confirmations**: å…³é—­ (å¼€å‘é˜¶æ®µ)
   - ç”Ÿäº§ç¯å¢ƒæ—¶å†å¼€å¯

## ğŸ› ï¸ è‡ªåŠ¨åŒ–é…ç½® (æ¨è)

å®Œæˆä¸Šè¿°æ‰‹åŠ¨æ­¥éª¤åï¼Œè¿è¡Œè‡ªåŠ¨åŒ–è„šæœ¬ï¼š

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/lighting-app

# 2. é“¾æ¥åˆ° Supabase é¡¹ç›®
supabase login
supabase link --project-ref ä½ çš„é¡¹ç›®ID

# 3. è¿è¡Œæ•°æ®åº“è¿ç§»
supabase db push

# 4. éªŒè¯è¿æ¥
npm run mcp:db migrate status
```

## âœ… éªŒè¯æ¸…å•

å®Œæˆé…ç½®åï¼Œæ£€æŸ¥ä»¥ä¸‹é¡¹ç›®ï¼š

- [ ] âœ… Supabase é¡¹ç›®å·²åˆ›å»º
- [ ] âœ… ç¯å¢ƒå˜é‡å·²æ›´æ–°
- [ ] âœ… è®¤è¯è®¾ç½®å·²é…ç½®
- [ ] âœ… æ•°æ®åº“å·²é“¾æ¥
- [ ] âœ… è¿ç§»è„šæœ¬å·²æ‰§è¡Œ
- [ ] âœ… MCP è¿æ¥æ­£å¸¸

## ğŸ”§ æµ‹è¯•è¿æ¥

è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯è¿æ¥ï¼š

```bash
# æµ‹è¯•æ•°æ®åº“è¿æ¥
npm run mcp:db migrate status

# æµ‹è¯• API å¥åº·çŠ¶æ€
curl http://localhost:3000/api/health

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

## ğŸ“Š é¢„æœŸç»“æœ

è¿æ¥æˆåŠŸåï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š

1. **MCP çŠ¶æ€**: âœ… Supabase connected
2. **æ•°æ®åº“è¡¨**: 12 ä¸ªè¡¨å·²åˆ›å»º
3. **å‡½æ•°**: 4 ä¸ªæ¨èç®—æ³•å‡½æ•°å¯ç”¨
4. **API å¥åº·**: database.status = "healthy"

## ğŸ”„ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. è¿æ¥è¶…æ—¶**
```bash
# æ£€æŸ¥ç½‘ç»œå’Œé¡¹ç›®çŠ¶æ€
supabase projects list
```

**2. è®¤è¯å¤±è´¥**
```bash
# é‡æ–°ç™»å½•
supabase logout
supabase login
```

**3. è¿ç§»å¤±è´¥**
```bash
# é‡ç½®å¹¶é‡æ–°è¿ç§»
supabase db reset
```

**4. ç¯å¢ƒå˜é‡é”™è¯¯**
- ç¡®è®¤ `.env.local` æ ¼å¼æ­£ç¡®
- é‡å¯å¼€å‘æœåŠ¡å™¨: `npm run dev`

## ğŸ¯ ä¸‹ä¸€æ­¥

é…ç½®å®Œæˆåï¼š

1. **æ·»åŠ ç¤ºä¾‹æ•°æ®** - è¿è¡Œç§å­æ•°æ®è„šæœ¬
2. **æµ‹è¯•æ¨èç®—æ³•** - å®Œæˆé—®å·æµç¨‹
3. **é…ç½®ç¼“å­˜** - è®¾ç½® Redis è¿æ¥
4. **éƒ¨ç½²å‡†å¤‡** - é…ç½® Cloudflare Pages

---

**é¢„è®¡å®Œæˆæ—¶é—´**: 10-15åˆ†é’Ÿ  
**æŠ€æœ¯éš¾åº¦**: åˆçº§  
**å‰ç½®è¦æ±‚**: äº’è”ç½‘è¿æ¥, GitHub è´¦å·